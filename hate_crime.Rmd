# Hate Crime Data {#hate_crimes}

```{r, echo=FALSE}
knitr::opts_chunk$set(
  echo    = FALSE,
  warning = FALSE,
  error   = FALSE,
  message = FALSE
)
```

```{r}
load("data/ucr_hate_crimes_1991_2018.rda")
library(DT)
library(dplyr)
library(ggplot2)
library(crimeutils)

make_frequency_table <- function(data, column, col_names) {
  temp <- unique(data[, column])
  temp <- temp[!is.na(temp)]
  temp_df <- data.frame(col1 = temp,
                        first_year = NA,
                        number   = NA) 
  
  for (i in 1:nrow(temp_df)) {
    loop_value <- temp_df$col1[i]
    storage <- data[data[, column] %in% loop_value, ]
    temp_df$number[i] <- nrow(storage)
    temp_df$first_year[i] <- min(storage$year)
  }
  temp_df <-
    temp_df %>%
    mutate(percent = number / sum(number)) %>%
    arrange(desc(number),
            desc(first_year)) %>%
    mutate(col1 = crimeutils::capitalize_words(col1))
  names(temp_df) <- col_names
  return(temp_df)
}


```


This dataset covers crimes that are reported to the police and judged by the police to be motivated by hate More specifically, they are, first, crimes which were, second, motivated - at least in part - by bias towards a certain person or group of people because of characteristics about them such as race, sexual orientation, or religion. The first part is key, they must be crimes - and really must be the selection of crimes that the FBI collects for this dataset. Biased actions that don't meet the standard of a crime, or are of a crime not included in this data, are not considered hate crimes. For example, if someone yells at a Black person and uses racial slurs against them, it is clearly a racist action. For it to be included in this data, however, it would have to extend to a threat since "intimidation" is a crime included in this data but lesser actions such as simply insulting someone is not included. For the second part, the bias motivation, it must be against a group that the FBI includes in this data. When this data collection began crimes against transgender people were not counted so if a transgender person was assaulted or killed because they were transgender, this is not a hate crime recorded in the data.^[The first year where transgender as a group was a considered a bias motivation was in 2013.] 

So this data is really a narrower measure of hate crimes than it might seem. In practice it is (some) crimes motivated by (some) kinds of hate that are reported to the police. It is also the most under-reported UCR dataset with most agencies not reporting any hate crimes to the FBI. This leads to huge gaps in the data with some states having zero agencies report crime, agencies reporting some bias motivations but not others, agencies reporting some years but not others. While these problems exist for all of the UCR datasets, it is most severe in this data. This problem is exacerbated by hate crimes being rare even in agencies that report them - with such rare events, even minor changes in which agencies report or which types of offenses they include can have large effects. 

My main takeaway for this data is that it is inappropriate to use it to study hate crimes. At most it can be used to look at within-city within-bias-motivation trends, while keeping in mind that even this narrow subset of data is limited by under-reporting by victims and potential changes in police practices of reporting such as how many months of data they report per year. 


## A brief history of the data

```{r, fig.cap = "The annual number of police agencies that report at least one hate crime incident in that year."}
ucr_hate_crimes_1991_2018 %>%
  dplyr::filter(hate_crime_incident_present_flag %in% "one or more hate crime incidents present") %>%
  dplyr::distinct(ori, year, .keep_all = TRUE) %>%
  count(year) %>%
  ggplot(aes(x = year, y = n)) +
  geom_line(size = 1.05) +
  xlab("Year") +
  ylab("# of Agencies") +
  theme_crim() +
  scale_y_continuous(labels = scales::comma) +
  expand_limits(y = 0)
```


```{r hateBiasMotivation, fig.cap = "The bias motivation for hate crime incidents. In incidents with multiple bias motivation, this shows only the first bias motivation recorded."}
ucr_hate_crimes_1991_2018$bias_motivation_offense_1[ucr_hate_crimes_1991_2018$bias_motivation_offense_1 %in% "99"] <- NA
temp <- make_frequency_table(ucr_hate_crimes_1991_2018, "bias_motivation_offense_1",
                             c("Bias Motivation", "First Year Reported", "# of Incidents", "% of Incidents"))
temp$`Bias Motivation` <- gsub("lgbt", "LGBT", ignore.case = TRUE, temp$`Bias Motivation`)
datatable(temp) %>%
  formatPercentage('% of Incidents', 2) %>%
  formatRound('# of Incidents', digits = 0)
```
```{r hateOffense, fig.cap = "The offense type for hate crime incidents. In incidents with multiple offense types, this shows only the first offense type recorded."}
ucr_hate_crimes_1991_2018$ucr_offense_code_1[ucr_hate_crimes_1991_2018$ucr_offense_code_1 %in% "720"] <- NA
temp <- make_frequency_table(ucr_hate_crimes_1991_2018, "ucr_offense_code_1",
                             c("Offense", "First Year Reported", "# of Incidents", "% of Incidents"))
datatable(temp) %>%
  formatPercentage('% of Incidents', 2) %>%
  formatRound('# of Incidents', digits = 0)
```
```{r hateLocations, fig.cap = "The location of hate crime incidents. In incidents with multiple locations, this shows only the first location recorded."}
ucr_hate_crimes_1991_2018$location_code_offense_1[ucr_hate_crimes_1991_2018$location_code_offense_1 %in% "undocumented code v13"] <- NA
temp <- make_frequency_table(ucr_hate_crimes_1991_2018, "location_code_offense_1",
                             c("Location", "First Year Reported", "# of Incidents", "% of Incidents"))
datatable(temp) %>%
  formatPercentage('% of Incidents', 2) %>%
  formatRound('# of Incidents', digits = 0)
```

### Changes in definitions

## What does the data look like?

### Raw data


## What variables are in the data?

### Key variables

## Known issues with the data

## Final thoughts